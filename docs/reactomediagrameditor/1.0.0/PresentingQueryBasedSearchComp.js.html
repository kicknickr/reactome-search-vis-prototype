<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>PresentingQueryBasedSearchComp.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AdvancedSearchPresComponent.html">AdvancedSearchPresComponent</a><ul class='methods'><li data-type='method'><a href="AdvancedSearchPresComponent.html#getQueryParams">getQueryParams</a></li><li data-type='method'><a href="AdvancedSearchPresComponent.html#renderCollapsibleSectionsComp">renderCollapsibleSectionsComp</a></li><li data-type='method'><a href="AdvancedSearchPresComponent.html#renderRelationalSearchChooserComp">renderRelationalSearchChooserComp</a></li><li data-type='method'><a href="AdvancedSearchPresComponent.html#switchTab">switchTab</a></li></ul></li><li><a href="BaseSearchComponent.html">BaseSearchComponent</a><ul class='methods'><li data-type='method'><a href="BaseSearchComponent.html#destroy">destroy</a></li><li data-type='method'><a href="BaseSearchComponent.html#gatherQueryParameters">gatherQueryParameters</a></li><li data-type='method'><a href="BaseSearchComponent.html#getConstrainedRelationLiveResults">getConstrainedRelationLiveResults</a></li><li data-type='method'><a href="BaseSearchComponent.html#getPreliminaryLiveResults">getPreliminaryLiveResults</a></li><li data-type='method'><a href="BaseSearchComponent.html#handlePreliminaryResult">handlePreliminaryResult</a></li><li data-type='method'><a href="BaseSearchComponent.html#handlePreliminaryResults">handlePreliminaryResults</a></li><li data-type='method'><a href="BaseSearchComponent.html#makeQueryRequest">makeQueryRequest</a></li><li data-type='method'><a href="BaseSearchComponent.html#queryResult2liveResForm">queryResult2liveResForm</a></li><li data-type='method'><a href="BaseSearchComponent.html#updateQueryResults">updateQueryResults</a></li><li data-type='method'><a href="BaseSearchComponent.html#validateQueryParams">validateQueryParams</a></li></ul></li><li><a href="CollapsibleSectionsComp.html">CollapsibleSectionsComp</a></li><li><a href="CustomMDCChipSetComp.html">CustomMDCChipSetComp</a><ul class='methods'><li data-type='method'><a href="CustomMDCChipSetComp.html#getSelectedValues">getSelectedValues</a></li><li data-type='method'><a href="CustomMDCChipSetComp.html#setAllChipsSelected">setAllChipsSelected</a></li><li data-type='method'><a href="CustomMDCChipSetComp.html#toggleUserInteractionAllowed">toggleUserInteractionAllowed</a></li></ul></li><li><a href="DiagramEditorPage.html">DiagramEditorPage</a></li><li><a href="DiagramEditorStateManager.html">DiagramEditorStateManager</a><ul class='methods'><li data-type='method'><a href="DiagramEditorStateManager.html#generateNodeForPE">generateNodeForPE</a></li><li data-type='method'><a href="DiagramEditorStateManager.html#generateNodesForEntirePathwayImport">generateNodesForEntirePathwayImport</a></li></ul></li><li><a href="DiagramEditorViewport.html">DiagramEditorViewport</a><ul class='methods'><li data-type='method'><a href="DiagramEditorViewport.html#initCanvasForPathwayImport">initCanvasForPathwayImport</a></li></ul></li><li><a href="ISearchPresManager.html">ISearchPresManager</a><ul class='methods'><li data-type='method'><a href="ISearchPresManager.html#addResultToDisplay">addResultToDisplay</a></li><li data-type='method'><a href="ISearchPresManager.html#clearResultsDisplay">clearResultsDisplay</a></li><li data-type='method'><a href="ISearchPresManager.html#destroy">destroy</a></li><li data-type='method'><a href="ISearchPresManager.html#getAllUserQueryParams">getAllUserQueryParams</a></li><li data-type='method'><a href="ISearchPresManager.html#openDisplay">openDisplay</a></li><li data-type='method'><a href="ISearchPresManager.html#toggleAllQueryInput">toggleAllQueryInput</a></li></ul></li><li><a href="module-RenderableNode.html">RenderableNode</a></li><li><a href="NonPresentingEntitiesWithinComplexSearchComp.html">NonPresentingEntitiesWithinComplexSearchComp</a><ul class='methods'><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#destroy">destroy</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#gatherQueryParameters">gatherQueryParameters</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#getConstrainedRelationLiveResults">getConstrainedRelationLiveResults</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#getPreliminaryLiveResults">getPreliminaryLiveResults</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#handlePreliminaryResult">handlePreliminaryResult</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#handlePreliminaryResults">handlePreliminaryResults</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#makeQueryRequest">makeQueryRequest</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#queryResult2liveResForm">queryResult2liveResForm</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#updateQueryResults">updateQueryResults</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#validateQueryParams">validateQueryParams</a></li></ul></li><li><a href="NonPresentingPathwaysContainingEntrySearchComp.html">NonPresentingPathwaysContainingEntrySearchComp</a><ul class='methods'><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#destroy">destroy</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#gatherQueryParameters">gatherQueryParameters</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#getConstrainedRelationLiveResults">getConstrainedRelationLiveResults</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#getPreliminaryLiveResults">getPreliminaryLiveResults</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#handlePreliminaryResult">handlePreliminaryResult</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#handlePreliminaryResults">handlePreliminaryResults</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#makeQueryRequest">makeQueryRequest</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#queryResult2liveResForm">queryResult2liveResForm</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#updateQueryResults">updateQueryResults</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#validateQueryParams">validateQueryParams</a></li></ul></li><li><a href="PageSwitcher.html">PageSwitcher</a><ul class='methods'><li data-type='method'><a href="PageSwitcher.html#switchPage">switchPage</a></li></ul></li><li><a href="PaneComponent.html">PaneComponent</a><ul class='methods'><li data-type='method'><a href="PaneComponent.html#addActionButton">addActionButton</a></li><li data-type='method'><a href="PaneComponent.html#close">close</a></li><li data-type='method'><a href="PaneComponent.html#destroy">destroy</a></li><li data-type='method'><a href="PaneComponent.html#getAllowDragging">getAllowDragging</a></li><li data-type='method'><a href="PaneComponent.html#getPaneBodySel">getPaneBodySel</a></li><li data-type='method'><a href="PaneComponent.html#open">open</a></li><li data-type='method'><a href="PaneComponent.html#setAllowDragging">setAllowDragging</a></li></ul></li><li><a href="PresentingQueryBasedSearchComp.html">PresentingQueryBasedSearchComp</a><ul class='methods'><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#.getReactomeFacetOptions">getReactomeFacetOptions</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#destroy">destroy</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#gatherQueryParameters">gatherQueryParameters</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#getConstrainedRelationLiveResults">getConstrainedRelationLiveResults</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#getPreliminaryLiveResults">getPreliminaryLiveResults</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#handlePreliminaryResult">handlePreliminaryResult</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#handlePreliminaryResults">handlePreliminaryResults</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#makeQueryRequest">makeQueryRequest</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#queryResult2liveResForm">queryResult2liveResForm</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#setResultsConstraint">setResultsConstraint</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#updateQueryResults">updateQueryResults</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#validateQueryParams">validateQueryParams</a></li></ul></li><li><a href="QueryBasedSearchPresManager.html">QueryBasedSearchPresManager</a><ul class='methods'><li data-type='method'><a href="QueryBasedSearchPresManager.html#addResultToDisplay">addResultToDisplay</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#clearResultsDisplay">clearResultsDisplay</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#destroy">destroy</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#getAllUserQueryParams">getAllUserQueryParams</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#openDisplay">openDisplay</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#toggleAllQueryInput">toggleAllQueryInput</a></li></ul></li><li><a href="ReactomeAPIQuerier.html">ReactomeAPIQuerier</a><ul class='methods'><li data-type='method'><a href="ReactomeAPIQuerier.html#.getDBEntryInfoRegular">getDBEntryInfoRegular</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getEntitiesWithinComplex">getEntitiesWithinComplex</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getEntrySearchResults">getEntrySearchResults</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getFacetTypes">getFacetTypes</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getLLDPathwaysContainingEntry">getLLDPathwaysContainingEntry</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getPathwayDiagramLayout">getPathwayDiagramLayout</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getPathwaysHavingDiagContainingEntry">getPathwaysHavingDiagContainingEntry</a></li></ul></li><li><a href="ReactomeRequestProcessor.html">ReactomeRequestProcessor</a><ul class='methods'><li data-type='method'><a href="ReactomeRequestProcessor.html#.getEntitiesWithinComplex">getEntitiesWithinComplex</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getEntrySearchResults">getEntrySearchResults</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getEntrySearchResultsFormatted">getEntrySearchResultsFormatted</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getHumanPathwayList">getHumanPathwayList</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getMapFacet2Types">getMapFacet2Types</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getPathwayDiagramLayout">getPathwayDiagramLayout</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getPathwaysHavingDiagContainingEntry">getPathwaysHavingDiagContainingEntry</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#getSampleDiagObj">getSampleDiagObj</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#rawPathwayLayout2diagObjs">rawPathwayLayout2diagObjs</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#searchForLLPathway">searchForLLPathway</a></li></ul></li><li><a href="SimpleSearchPresComponent.html">SimpleSearchPresComponent</a><ul class='methods'><li data-type='method'><a href="SimpleSearchPresComponent.html#toggleAllowUserSearchBarInput">toggleAllowUserSearchBarInput</a></li></ul></li><li><a href="TabBarComponent.html">TabBarComponent</a></li></ul><h3>Modules</h3><ul><li><a href="module-RenderableChemicalNode.html">RenderableChemicalNode</a></li><li><a href="module-RenderableComplexNode.html">RenderableComplexNode</a></li><li></li><li><a href="module-RenderableEntityNode.html">RenderableEntityNode</a></li><li><a href="module-RenderableEntitySetNode.html">RenderableEntitySetNode</a></li><li><a href="module-RenderableGeneNode.html">RenderableGeneNode</a></li><li><a href="module-RenderableNode.html">RenderableNode</a></li><li><a href="module-RenderableProcessNodeNode.html">RenderableProcessNodeNode</a></li><li></li><li><a href="module-RenderableRNANode.html">RenderableRNANode</a></li></ul><h3>Global</h3><ul><li><a href="global.html#advancedPaneTabTypes">advancedPaneTabTypes</a></li><li><a href="global.html#getTypeFacetOptionsForSearch">getTypeFacetOptionsForSearch</a></li><li><a href="global.html#resultsConstraintModeTypes">resultsConstraintModeTypes</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#subSearchTypes">subSearchTypes</a></li><li><a href="global.html#toggleSectionExpansion">toggleSectionExpansion</a></li><li><a href="global.html#validRelationSubSearchTypes">validRelationSubSearchTypes</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">PresentingQueryBasedSearchComp.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as d3 from "d3";

import QueryBasedSearchPresManager from "./QueryBasedSearchPresManager";
import ReactomeRequestProcessor from "./ReactomeRequestProcessor";
import BaseSearchComponent, {
    getTypeFacetOptionsForSearch,
    resultsConstraintModeTypes,
    subSearchTypes,
    validRelationSubSearchTypes
} from "./BaseSearchComponent";
import NonPresentingPathwaysContainingEntrySearchComp from "./NonPresentingPathwaysContainingEntrySearchComp";
import NonPresentingEntitiesWithinComplexSearchComp from "./NonPresentingEntitiesWithinComplexSearchComp";

/**
 * TODO
 *
 * @callback PresentingQueryBasedSearchComp~entrySelectCb
 * @param {(number|string)} selectedResID
 */

/** @typedef PresentingQueryBasedSearchComp~facetInfoObj
 * @type {Map&lt;string, {facetName: string, facetTypes: Array&lt;{value: string, isDefaultQ: boolean, isInteractableQ: boolean}>, custChipSetComp: *, userSelectionAllowed: boolean}>}
 */

/**
 * TODO
 *
 * @augments BaseSearchComponent
 */
class PresentingQueryBasedSearchComp extends BaseSearchComponent {
    // /** @description Gets called when a result (resulting a DB entry) is selected in {@link SimpleSearchPresComponent}
    //  * @type {PresentingQueryBasedSearchComp~selectDBEntryHandler} */
    // #selectDBEntryHandler;

    /** @type {Map&lt;(string|number), {stId: string}>}*/
    liveResults;
    /** @description A map of the promises returned by {@link BaseSearchComponent#userQueryParameters} of subsearches
     * @type {Map&lt;(string|number), Promise&lt;Map&lt;(string|number), *>>>}*/
    subSearches = new Map();
    /** @type {{entryNameUserQueryString: string, type: Set&lt;string>, species: Set&lt;string>, keyword: Set&lt;string>, compartment: Set&lt;string>}} */
    userQueryParameters;
    /** @description {@link QueryBasedSearchPresManager}
     * @type {QueryBasedSearchPresManager}
     */
    presManager;
    /** @description Information about Reactome facets and their values in the context of being used for search filtering
     * @type {PresentingQueryBasedSearchComp~facetInfoObj} */
    facetInfo;
    /** @description Promise that returns when the class has finished its "initialization"
     * (the async code from the constructor is finished)
     * @type {Promise&lt;void>}
     */
    init;
    /**
     * @description The search component that constraints that further containers the results of this search
     * @type {BaseSearchComponent} */
    relationSC;

    /**
     * TODO
     *
     * @param {ReactomeRequestProcessor} reactomeRequestProcessor - TODO
     * @param {d3.Selection} viewportSel - {@link BaseSearchComponent#viewportSel}
     * @param {d3.Selection} containerSel - {@link BaseSearchComponent#containerSel}
     * @param {BaseSearchComponent~subSearchEnum} subSearchType - {@link BaseSearchComponent#subSearchType}
     * @param {PresentingQueryBasedSearchComp~entrySelectCb} entrySelectCb - {@link PresentingQueryBasedSearchComp~entrySelectCb}
     */
    constructor(reactomeRequestProcessor, viewportSel, containerSel, subSearchType, entrySelectCb = () => {
    }) {
        super(reactomeRequestProcessor, viewportSel, containerSel, resultsConstraintModeTypes.OWN_RES_ONLY, subSearchType);

        this.init = PresentingQueryBasedSearchComp.getReactomeFacetOptions().then(async (facetInfo) => {
            this.facetInfo = facetInfo;
            this.presManager = new QueryBasedSearchPresManager(
                (selectedResID) => {
                    this.liveResults.forEach((res) => {
                        res["selected"] = res.stId === selectedResID
                    });
                    entrySelectCb(selectedResID);
                },
                this.viewportSel,
                this.viewportSel,
                this.updateQueryResults.bind(this),
                this.setResultsConstraint.bind(this),
                this.facetInfo,
                validRelationSubSearchTypes(this.subSearchType));

            await this.setResultsConstraint(resultsConstraintModeTypes.OWN_RES_ONLY, subSearchTypes.NONE);

            // this.presManager.renderCollapsibleSectionsComp();
        })
    }


    /**
     * TODO
     *
     * @returns {Promise&lt;Map&lt;(string|number), *>>}
     */
    async updateQueryResults() {
        this.presManager.clearResultsDisplay();
        return await super.updateQueryResults();
    }

    /** @returns {{entryNameUserQueryString: string, type: Set&lt;string>, species: Set&lt;string>, keyword: Set&lt;string>, compartment: Set&lt;string>}} */
    gatherQueryParameters() {
        return this.presManager.getAllUserQueryParams();
    }

    validateQueryParams() {
        return this.userQueryParameters.entryNameUserQueryString.length >= 3;
    }

    async makeQueryRequest() {
        // return this.reactomeRequestProcessor.searchForLLPathway(this.userQueryParameters.pathwayNameSearchString);
        return await ReactomeRequestProcessor.getEntrySearchResults(
            this.userQueryParameters.entryNameUserQueryString,
            this.userQueryParameters.species,
            this.userQueryParameters.type,
            this.userQueryParameters.compartment,
            this.userQueryParameters.keyword,
        )
    }

    queryResult2liveResForm() {
        const preliminaryResults = new Map();
        this.rawResults.results[0].entries.forEach((dbEntryRawResult) => {
            preliminaryResults.set(dbEntryRawResult.stId, dbEntryRawResult)
        });
        return preliminaryResults;
    }

    /**
     * TODO mention how promise returns when subSC from single entry finishes its life cycle and its liveRes populated
     *
     * @param DbEntryResult
     * @returns {Promise&lt;void>}
     */
    async handlePreliminaryResult(DbEntryResult) {
        this.presManager.addResultToDisplay(DbEntryResult);

        const resultId = DbEntryResult.stId;
        let subSC;
        switch (this.subSearchType) {
            case(subSearchTypes.NONE):
                return;
            case(subSearchTypes.GET_PATHWAYS_CONTAINING_ENTRY):
                subSC = new NonPresentingPathwaysContainingEntrySearchComp(this.reactomeRequestProcessor, resultId);
                break;
            case(subSearchTypes.GET_ENTITIES_CONTAINED_BY_COMPLEX):
                subSC = new NonPresentingEntitiesWithinComplexSearchComp(this.reactomeRequestProcessor, resultId);
                break;
            default:
                throw Error("handlePreliminaryResult");
        }
        this.subSearches.set(resultId, await subSC.updateQueryResults());
    }

    async handlePreliminaryResults() {
        this.subSearches = new Map();
        super.handlePreliminaryResults();
    }

    /**
     * TODO
     *
     * @param {BaseSearchComponent~resultsConstraintModeEnum} resultsConstraintMode
     * @param {BaseSearchComponent~subSearchEnum} newSearchSubSearch
     */
    async setResultsConstraint(resultsConstraintMode, newSearchSubSearch) {

        if (this.relationSC) this.relationSC.destroy();
        this.resultsConstraintMode = resultsConstraintMode;
        const allowableTypeFacetOptions = getTypeFacetOptionsForSearch(this.subSearchType, newSearchSubSearch);
        const allowedQFunc = (typeOption) =>  !allowableTypeFacetOptions || allowableTypeFacetOptions.has(typeOption);
        if (this.resultsConstraintMode === resultsConstraintModeTypes.CONSTRAINT_RES_ONLY) {
            this.facetInfo.get("type").facetTypes.forEach(option => {option.isDefaultQ = allowedQFunc(option.value); option.isInteractableQ = false;});
            this.presManager.toggleAllQueryInput(false);
            // return;
        }
        else {
            this.facetInfo.get("type").facetTypes.forEach(option => {
                option.isDefaultQ = !!allowableTypeFacetOptions &amp;&amp; allowedQFunc(option.value);
                option.isInteractableQ = allowedQFunc(option.value);
                this.presManager.toggleAllQueryInput(true);
            })
        }


        if (this.resultsConstraintMode === resultsConstraintModeTypes.OWN_RES_ONLY) {
            return;
        }
        // TODO

        this.presManager.renderCollapsibleSectionsComp();
        switch (newSearchSubSearch) {
            case(subSearchTypes.GET_ENTITIES_CONTAINED_BY_COMPLEX):
            case(subSearchTypes.GET_PATHWAYS_CONTAINING_ENTRY):
                this.relationSC = new PresentingQueryBasedSearchComp(this.reactomeRequestProcessor, this.viewportSel, this.viewportSel, newSearchSubSearch, this.updateQueryResults.bind(this));
                await this.relationSC.init;
                // TODO should change based on whether mode is to get all results or just sub results of one clicked
                this.getConstrainedRelationLiveResults = async () => {
                    const results = new Map();
                    await Promise.all(this.relationSC.subSearches.values()).then((liveResultsOfAllSubSearches) => liveResultsOfAllSubSearches.forEach((liveResults) => {
                        liveResults.forEach((value, key) => results.set(key, value))
                    }));
                    return results;
                };
                this.relationSC.presManager.renderCollapsibleSectionsComp();
                this.relationSC.presManager.openDisplay();
                break;
            case (subSearchTypes.NONE) :
                return;
            case (subSearchTypes.DUMMY):
            default:
                throw Error("setResultsConstraint");
        }
        this.updateQueryResults();
    }

    /**
     * TODO rename ??
     *
     * @returns {PresentingQueryBasedSearchComp~facetInfoObj}
     */
    static async getReactomeFacetOptions() {
        const mapFacet2Types = await ReactomeRequestProcessor.getMapFacet2Types();
        const facetInfo = new Map(["type", "species", "keyword", "compartment"].map((facetName) => {
            return [
                facetName,
                {
                    facetName,
                    facetTypes: mapFacet2Types.get(facetName)
                        .sort(({count: count1}, {count: count2}) => count2 > count1)
                        .map(({name, count}) => ({value: name, isDefaultQ: false, isInteractableQ: true})),
                    //TODO detlete the {} ?
                    custChipSetComp: {},
                    userSelectionAllowed: true
                }]
        }));

        const typeFacetInfo = facetInfo.get("type");
        typeFacetInfo.sectionTitle = "Type ( limited subset of Reactome DB Entry Types )";

        const speciesFacetInfo = facetInfo.get("species");
        speciesFacetInfo.sectionTitle = "Species";
        speciesFacetInfo.facetTypes.forEach((speciesOption) => {
            speciesOption.isDefaultQ = (speciesOption.value === "Homo sapiens")
        });

        const keywordFacetInfo = facetInfo.get("keyword");
        keywordFacetInfo.sectionTitle = "Keyword";

        const compartmentFacetInfo = facetInfo.get("compartment");
        compartmentFacetInfo.sectionTitle = "Compartment";

        return facetInfo;
    }

    destroy() {
        this.presManager.destroy();
    }
}

export default PresentingQueryBasedSearchComp;</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Sat May 16 2020 13:59:04 GMT-0400 (Eastern Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
