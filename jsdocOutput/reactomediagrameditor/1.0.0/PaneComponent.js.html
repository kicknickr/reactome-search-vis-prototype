<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>PaneComponent.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AdvancedSearchPresComponent.html">AdvancedSearchPresComponent</a><ul class='methods'><li data-type='method'><a href="AdvancedSearchPresComponent.html#getQueryParams">getQueryParams</a></li><li data-type='method'><a href="AdvancedSearchPresComponent.html#renderCollapsibleSectionsComp">renderCollapsibleSectionsComp</a></li><li data-type='method'><a href="AdvancedSearchPresComponent.html#renderRelationalSearchChooserComp">renderRelationalSearchChooserComp</a></li><li data-type='method'><a href="AdvancedSearchPresComponent.html#switchTab">switchTab</a></li></ul></li><li><a href="BaseSearchComponent.html">BaseSearchComponent</a><ul class='methods'><li data-type='method'><a href="BaseSearchComponent.html#destroy">destroy</a></li><li data-type='method'><a href="BaseSearchComponent.html#gatherQueryParameters">gatherQueryParameters</a></li><li data-type='method'><a href="BaseSearchComponent.html#getConstrainedRelationLiveResults">getConstrainedRelationLiveResults</a></li><li data-type='method'><a href="BaseSearchComponent.html#getPreliminaryLiveResults">getPreliminaryLiveResults</a></li><li data-type='method'><a href="BaseSearchComponent.html#handlePreliminaryResult">handlePreliminaryResult</a></li><li data-type='method'><a href="BaseSearchComponent.html#handlePreliminaryResults">handlePreliminaryResults</a></li><li data-type='method'><a href="BaseSearchComponent.html#makeQueryRequest">makeQueryRequest</a></li><li data-type='method'><a href="BaseSearchComponent.html#queryResult2liveResForm">queryResult2liveResForm</a></li><li data-type='method'><a href="BaseSearchComponent.html#updateQueryResults">updateQueryResults</a></li><li data-type='method'><a href="BaseSearchComponent.html#validateQueryParams">validateQueryParams</a></li></ul></li><li><a href="CollapsibleSectionsComp.html">CollapsibleSectionsComp</a></li><li><a href="CustomMDCChipSetComp.html">CustomMDCChipSetComp</a><ul class='methods'><li data-type='method'><a href="CustomMDCChipSetComp.html#getSelectedValues">getSelectedValues</a></li><li data-type='method'><a href="CustomMDCChipSetComp.html#setAllChipsSelected">setAllChipsSelected</a></li><li data-type='method'><a href="CustomMDCChipSetComp.html#toggleUserInteractionAllowed">toggleUserInteractionAllowed</a></li></ul></li><li><a href="DiagramEditorPage.html">DiagramEditorPage</a></li><li><a href="DiagramEditorStateManager.html">DiagramEditorStateManager</a><ul class='methods'><li data-type='method'><a href="DiagramEditorStateManager.html#generateNodeForPE">generateNodeForPE</a></li><li data-type='method'><a href="DiagramEditorStateManager.html#generateNodesForEntirePathwayImport">generateNodesForEntirePathwayImport</a></li></ul></li><li><a href="DiagramEditorViewport.html">DiagramEditorViewport</a><ul class='methods'><li data-type='method'><a href="DiagramEditorViewport.html#initCanvasForPathwayImport">initCanvasForPathwayImport</a></li></ul></li><li><a href="ISearchPresManager.html">ISearchPresManager</a><ul class='methods'><li data-type='method'><a href="ISearchPresManager.html#addResultToDisplay">addResultToDisplay</a></li><li data-type='method'><a href="ISearchPresManager.html#clearResultsDisplay">clearResultsDisplay</a></li><li data-type='method'><a href="ISearchPresManager.html#destroy">destroy</a></li><li data-type='method'><a href="ISearchPresManager.html#getAllUserQueryParams">getAllUserQueryParams</a></li><li data-type='method'><a href="ISearchPresManager.html#openDisplay">openDisplay</a></li><li data-type='method'><a href="ISearchPresManager.html#toggleAllQueryInput">toggleAllQueryInput</a></li></ul></li><li><a href="module-RenderableNode.html">RenderableNode</a></li><li><a href="NonPresentingEntitiesWithinComplexSearchComp.html">NonPresentingEntitiesWithinComplexSearchComp</a><ul class='methods'><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#destroy">destroy</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#gatherQueryParameters">gatherQueryParameters</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#getConstrainedRelationLiveResults">getConstrainedRelationLiveResults</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#getPreliminaryLiveResults">getPreliminaryLiveResults</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#handlePreliminaryResult">handlePreliminaryResult</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#handlePreliminaryResults">handlePreliminaryResults</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#makeQueryRequest">makeQueryRequest</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#queryResult2liveResForm">queryResult2liveResForm</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#updateQueryResults">updateQueryResults</a></li><li data-type='method'><a href="NonPresentingEntitiesWithinComplexSearchComp.html#validateQueryParams">validateQueryParams</a></li></ul></li><li><a href="NonPresentingPathwaysContainingEntrySearchComp.html">NonPresentingPathwaysContainingEntrySearchComp</a><ul class='methods'><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#destroy">destroy</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#gatherQueryParameters">gatherQueryParameters</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#getConstrainedRelationLiveResults">getConstrainedRelationLiveResults</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#getPreliminaryLiveResults">getPreliminaryLiveResults</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#handlePreliminaryResult">handlePreliminaryResult</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#handlePreliminaryResults">handlePreliminaryResults</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#makeQueryRequest">makeQueryRequest</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#queryResult2liveResForm">queryResult2liveResForm</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#updateQueryResults">updateQueryResults</a></li><li data-type='method'><a href="NonPresentingPathwaysContainingEntrySearchComp.html#validateQueryParams">validateQueryParams</a></li></ul></li><li><a href="PageSwitcher.html">PageSwitcher</a><ul class='methods'><li data-type='method'><a href="PageSwitcher.html#switchPage">switchPage</a></li></ul></li><li><a href="PaneComponent.html">PaneComponent</a><ul class='methods'><li data-type='method'><a href="PaneComponent.html#addActionButton">addActionButton</a></li><li data-type='method'><a href="PaneComponent.html#close">close</a></li><li data-type='method'><a href="PaneComponent.html#destroy">destroy</a></li><li data-type='method'><a href="PaneComponent.html#getAllowDragging">getAllowDragging</a></li><li data-type='method'><a href="PaneComponent.html#getPaneBodySel">getPaneBodySel</a></li><li data-type='method'><a href="PaneComponent.html#open">open</a></li><li data-type='method'><a href="PaneComponent.html#setAllowDragging">setAllowDragging</a></li></ul></li><li><a href="PresentingQueryBasedSearchComp.html">PresentingQueryBasedSearchComp</a><ul class='methods'><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#.getReactomeFacetOptions">getReactomeFacetOptions</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#destroy">destroy</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#gatherQueryParameters">gatherQueryParameters</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#getConstrainedRelationLiveResults">getConstrainedRelationLiveResults</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#getPreliminaryLiveResults">getPreliminaryLiveResults</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#handlePreliminaryResult">handlePreliminaryResult</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#handlePreliminaryResults">handlePreliminaryResults</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#makeQueryRequest">makeQueryRequest</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#queryResult2liveResForm">queryResult2liveResForm</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#setResultsConstraint">setResultsConstraint</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#updateQueryResults">updateQueryResults</a></li><li data-type='method'><a href="PresentingQueryBasedSearchComp.html#validateQueryParams">validateQueryParams</a></li></ul></li><li><a href="QueryBasedSearchPresManager.html">QueryBasedSearchPresManager</a><ul class='methods'><li data-type='method'><a href="QueryBasedSearchPresManager.html#addResultToDisplay">addResultToDisplay</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#clearResultsDisplay">clearResultsDisplay</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#destroy">destroy</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#getAllUserQueryParams">getAllUserQueryParams</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#openDisplay">openDisplay</a></li><li data-type='method'><a href="QueryBasedSearchPresManager.html#toggleAllQueryInput">toggleAllQueryInput</a></li></ul></li><li><a href="ReactomeAPIQuerier.html">ReactomeAPIQuerier</a><ul class='methods'><li data-type='method'><a href="ReactomeAPIQuerier.html#.getDBEntryInfoRegular">getDBEntryInfoRegular</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getEntitiesWithinComplex">getEntitiesWithinComplex</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getEntrySearchResults">getEntrySearchResults</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getFacetTypes">getFacetTypes</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getLLDPathwaysContainingEntry">getLLDPathwaysContainingEntry</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getPathwayDiagramLayout">getPathwayDiagramLayout</a></li><li data-type='method'><a href="ReactomeAPIQuerier.html#.getPathwaysHavingDiagContainingEntry">getPathwaysHavingDiagContainingEntry</a></li></ul></li><li><a href="ReactomeRequestProcessor.html">ReactomeRequestProcessor</a><ul class='methods'><li data-type='method'><a href="ReactomeRequestProcessor.html#.getEntitiesWithinComplex">getEntitiesWithinComplex</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getEntrySearchResults">getEntrySearchResults</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getEntrySearchResultsFormatted">getEntrySearchResultsFormatted</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getHumanPathwayList">getHumanPathwayList</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getMapFacet2Types">getMapFacet2Types</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getPathwayDiagramLayout">getPathwayDiagramLayout</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#.getPathwaysHavingDiagContainingEntry">getPathwaysHavingDiagContainingEntry</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#getSampleDiagObj">getSampleDiagObj</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#rawPathwayLayout2diagObjs">rawPathwayLayout2diagObjs</a></li><li data-type='method'><a href="ReactomeRequestProcessor.html#searchForLLPathway">searchForLLPathway</a></li></ul></li><li><a href="SimpleSearchPresComponent.html">SimpleSearchPresComponent</a><ul class='methods'><li data-type='method'><a href="SimpleSearchPresComponent.html#toggleAllowUserSearchBarInput">toggleAllowUserSearchBarInput</a></li></ul></li><li><a href="TabBarComponent.html">TabBarComponent</a></li></ul><h3>Modules</h3><ul><li><a href="module-RenderableChemicalNode.html">RenderableChemicalNode</a></li><li><a href="module-RenderableComplexNode.html">RenderableComplexNode</a></li><li></li><li><a href="module-RenderableEntityNode.html">RenderableEntityNode</a></li><li><a href="module-RenderableEntitySetNode.html">RenderableEntitySetNode</a></li><li><a href="module-RenderableGeneNode.html">RenderableGeneNode</a></li><li><a href="module-RenderableNode.html">RenderableNode</a></li><li><a href="module-RenderableProcessNodeNode.html">RenderableProcessNodeNode</a></li><li></li><li><a href="module-RenderableRNANode.html">RenderableRNANode</a></li></ul><h3>Global</h3><ul><li><a href="global.html#advancedPaneTabTypes">advancedPaneTabTypes</a></li><li><a href="global.html#getTypeFacetOptionsForSearch">getTypeFacetOptionsForSearch</a></li><li><a href="global.html#resultsConstraintModeTypes">resultsConstraintModeTypes</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#subSearchTypes">subSearchTypes</a></li><li><a href="global.html#toggleSectionExpansion">toggleSectionExpansion</a></li><li><a href="global.html#validRelationSubSearchTypes">validRelationSubSearchTypes</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">PaneComponent.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as d3 from "d3";
import {event as currentEvent} from "d3-selection";

import {menuSurface} from "material-components-web";
const MDCMenuSurface = menuSurface.MDCMenuSurface;

/**
 * Gets called when a button is clicked. May also be responsible for updating a button's icon.
 *
 * @callback PaneComponent~buttonClickCb
 * @param {d3.Selection} elem - The element of the button itself
 * @returns void
 */

/**
 * A generic "pane" or "window" type component. Includes presentation and functionality for dragging and resizing.
 */
class PaneComponent {
    /** @description parent elem of the menu surface
     * @type {d3.Selection} */
    menuAnchor;
    /** @description The MDC component for the menu surface comprising the pane
     * @type {MDCMenuSurface} */
    menuSurfaceComp;
    /** @description Whether or not the Pane is a 'pinned' state meaning whether click outside will close it or not
     * @type {boolean} */
    isPinnedQ;
    /** @description Element with the contents of the pane
     * @type {d3.Selection} */
    paneBodySel;
    /** @description Whether or not the user is hovering over the drag button of the pane
     * @type {boolean} */
    isDragButtonHoveredOverQ;
    /** @description Element for the "end" section within the MDC top app bar
     * @type {d3.Selection} */
    headerRightSection;
    /** @description Whether the pane is in an open state (visible) or not
     * @type {boolean} */
    isOpenQ;

    /**
     *
     * @param {d3.Selection} containerElem - The parent elem of anything children this class creates
     * @param {string} paneTitle - Name display centrally on the header of the pane
     * @param {string} anchorElemStyleClass - Name of the css class that will applied to the anchor elem.
     * The css class may include rules that specify the initial position and size information.
     */
    constructor(containerElem, paneTitle, anchorElemStyleClass) {

        // Do not allow click and right-clicks to bubble-up
        this.menuAnchor = containerElem.append("div")
            .classed("mdc-menu-surface--anchor resize-interactjs general-interactjs search-pane", true)
            .on("click", () => {currentEvent.stopPropagation(); this.movePaneToForemost()})
            .on("contextmenu", () => {currentEvent.preventDefault();currentEvent.stopPropagation();})
            .on("dblclick", () => {currentEvent.preventDefault();currentEvent.stopPropagation();})
            .on("pointermove", () => {
                if (currentEvent.ctrlKey || this.isDragButtonHoveredOverQ) {
                    if (this.getAllowDragging()) return;
                    this.setAllowDragging(true);
                    return;
                }
                this.setAllowDragging(false);
            });

        this.menuAnchor.classed(anchorElemStyleClass, true);

        const menuSurfaceSel = this.menuAnchor.append("div")
            .classed("mdc-menu-surface search-pane-menu-surface", true);
        this.menuSurfaceComp = new MDCMenuSurface(menuSurfaceSel.node());

        /* The following block defines the header of the pane */
        const paneHeaderArea = menuSurfaceSel.append("header")
            .classed("mdc-top-app-bar", true);
        const paneHeaderAreaRow = paneHeaderArea.append("div")
            .classed("mdc-top-app-bar__row", true);
        const headerLeftSection = paneHeaderAreaRow.append("section")
            .classed("mdc-top-app-bar__section mdc-top-app-bar__section--align-start", true);
        headerLeftSection.append("i")
            .classed("material-icons mdc-top-app-bar__navigation-icon mdc-icon-button", true)
            .text("open_with")
            .on("mouseenter", () => {this.isDragButtonHoveredOverQ = true; this.movePaneToForemost()})
            .on("mouseleave", () => {this.isDragButtonHoveredOverQ = false});
        headerLeftSection.append("span")
            .classed("mdc-top-app-bar__title", true)
            .text(paneTitle);
        this.headerRightSection = paneHeaderAreaRow.append("section")
            .classed("mdc-top-app-bar__section mdc-top-app-bar__section--align-end", true);

        /* Block end */

        this.paneBodySel = menuSurfaceSel.append("div")
            .classed("search-pane-body-area mdc-top-app-bar--fixed-adjust", true);

        // Since the MDC Component initializes in a closed state anyways, call our close to be consistent (styling)
        this.close(true);
    }

    movePaneToForemost() {
        // if (!this.menuAnchor.node().nextSibling) return;
        const parentElem = d3.select(this.menuAnchor.node().parentNode);
        // parentElem.append(() => this.menuAnchor.remove().node());

        while (this.menuAnchor.node().nextSibling) {
            const nextSibling = d3.select(this.menuAnchor.node().nextSibling);
            parentElem.insert(() => nextSibling.remove().node(), ":first-child");
        }
    }

    /**
     * Destroy the pane's dom and components. If other components used dom within this dom, then they
     * should be destroyed too separately
     */
    destroy() {
        this.menuSurfaceComp.destroy();
        this.menuAnchor.remove();
    }

    /**
     * Add an "action button" on the right-side of the pane and give it functionality
     *
     * @param {string} matIconName - The mdc-icon name for the button's icon.
     * Of the button's icon can be changed later via the on-click callback function since it will have access
     * to the button's element
     * @param {PaneComponent~buttonClickCb} callbackFunc - {@link PaneComponent~buttonClickCb}
     */
    addActionButton(matIconName, callbackFunc) {
        const newButton = this.headerRightSection.append("i")
            .classed("material-icons mdc-top-app-bar__action-item mdc-icon-button", true)
            .text(matIconName);
        newButton.on("click", () => callbackFunc(newButton));
    }

    /**
     *
     * @returns {d3.Selection} {@link PaneComponent#paneBodySel} . Used by other classes to populate its contents
     */
    getPaneBodySel() {
        return this.paneBodySel;
    }

    setPanePinned(willBePinnedQ) {
        this.isPinnedQ = willBePinnedQ;
    }

    closeIfUnpinned() {
        if(!this.isPinnedQ) this.close();
    }

    /**
     * Close the pane (without destroying/modifying its contents).
     * But first change styling in addition to the automatic style changes triggered by {@link MDCMenuSurface.close}
     * and set it to non-pinned by convention (functionally not important)
     *
     * @param {boolean} force - skip check to see if menu is open first
     */
    close(force= false) {
        if(this.menuSurfaceComp.isOpen() || force) {
            this.menuSurfaceComp.close();
            this.menuAnchor.classed("search-pane-opened", false);
            this.menuAnchor.classed("search-pane-closed", true);
            this.isPinnedQ = false;
            this.isOpenQ = false;
        }
    }

    /**
     * Open the pane (contents have not been modified since last opened).
     * But first remove additional "close" styling @see {@link PaneComponent.close}
     */
    open() {
        if(this.menuSurfaceComp.isOpen()) return;
        this.menuAnchor.classed("search-pane-closed", false);
        this.menuAnchor.classed("search-pane-opened", true);
        this.menuSurfaceComp.open();
        this.isOpenQ = true;
    }


    /**
     * Sets whether or not dragging is enabled for the pane (drag can be initiated by drag-clicking anywhere on the pane)
     *
     * @param {boolean} allowedQ
     */
    setAllowDragging(allowedQ) {
        if(allowedQ) {
            this.paneBodySel.style("pointer-events", "none");
            this.menuAnchor.classed("drag-interactjs", true)
        } else {
            this.menuAnchor.classed("drag-interactjs", false);
            this.paneBodySel.style("pointer-events", "auto");
        }
    }

    /**
     * Returns whether dragging is allowed
     *
     * @returns {boolean}
     */
    getAllowDragging() {
        return this.menuAnchor.classed("drag-interactjs");
    }
}

export default PaneComponent;</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Sun May 17 2020 02:35:00 GMT-0400 (Eastern Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
